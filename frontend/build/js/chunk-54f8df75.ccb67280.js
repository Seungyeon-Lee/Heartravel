(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54f8df75"],{2409:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return u}));var n=r("bc3a"),a=r.n(n);function i(e,t){return a()({method:"get",url:"/api/payments/"+e,data:t})}function s(e,t){return a()({method:"get",url:"/api/payments/status/"+e,data:t})}function u(e,t){return a()({method:"put",url:"/api/payments/"+e+"/status",data:t})}},3024:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("CCard",[r("CCardHeader",[r("strong",[e._v("결제 대기 리스트")])]),r("CCardBody",[r("CDataTable",{attrs:{items:e.items,fields:e.fields,"items-per-page":e.perPage,hover:"",sorter:"","table-filter":"","index-column":""},scopedSlots:e._u([{key:"order_id",fn:function(t){var n=t.item;return[r("td",[r("CLink",{on:{click:function(t){return e.rowClicked(n)}}},[e._v(" "+e._s(n.order_id)+" ")])],1)]}},{key:"amount",fn:function(t){var n=t.item;return[r("td",[e._v(" "+e._s(e.numberWithCommas(n.tot_price))+" ")])]}},{key:"delivery",fn:function(t){var n=t.item;return[r("td",[e._v(" "+e._s(n.delivery_status)+" ")])]}},{key:"status_index",fn:function(t){var n=t.item;return[r("td",[r("CBadge",{attrs:{color:e.getBadge(n.status_index)}},[e._v(" "+e._s(1===n.status_index?"결제대기":2===n.status_index?"결제완료":3===n.status_index?"주문취소":"환불완료")+" ")])],1)]}},{key:"registered",fn:function(t){var n=t.item;return[r("td",[e._v(" "+e._s(e.getDate(n.registered))+" ")])]}},{key:"show_details",fn:function(t){var n=t.item;return[r("td",[r("CButton",{staticClass:"btn btn-light",attrs:{size:"sm"},on:{click:function(t){return e.updateStatus(n.order_description,n.payment_id)}}},[e._v("결제완료")])],1)]}}])})],1)],1)],1)},a=[],i=(r("d3b7"),r("ac1f"),r("25f0"),r("5319"),r("96cf"),r("1da1")),s=r("2409"),u={name:"AdminOrderList",data:function(){return{items:[],fields:[{key:"order_id",label:"주문번호",sorter:!1},{key:"user_id",label:"아이디"},{key:"user_name",label:"이름"},{key:"order_description",label:"주문내역",sorter:!1},{key:"registered",label:"주문일자"},{key:"amount",label:"가격",sorter:!1},{key:"status_index",label:"상태",sorter:!1},{key:"show_details",label:"",sorter:!1}],details:[],perPage:10}},paginationProps:{align:"center",doubleArrows:!0,previousButtonHtml:"prev",nextButtonHtml:"next"},mounted:function(){this.getOrderData()},methods:{refreshPage:function(){this.$router.go(0)},getBadge:function(e){return 1===e?"secondary":2===e?"success":3===e?"danger":"primary"},orderLink:function(e){return"/admin/orders/".concat(e.toString())},rowClicked:function(e){var t=this.orderLink(e.order_id);this.$router.push({path:t})},getOrderData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s["a"](1);case 3:t=e.sent,this.items=t.data.result,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),getDate:function(e){var t=new Date(e);return t.toLocaleString()},numberWithCommas:function(e){if(e)return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},updateStatus:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm(t+"의 결제 상태를 '결제완료'로 변경하시겠습니까?")){e.next=10;break}return e.prev=1,e.next=4,s["c"](r,{payment:{status_index:2}});case 4:n=e.sent,"success"===n.data.code&&(alert("변경되었습니다"),this.refreshPage()),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](1);case 10:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t,r){return e.apply(this,arguments)}return t}()}},o=u,c=r("2877"),d=Object(c["a"])(o,n,a,!1,null,"57d4631e",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-54f8df75.ccb67280.js.map